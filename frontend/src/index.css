:root {
  --miku: #00e5ff;
  --miku2: #1de9b6;
  --pink: #ff4dd2;
  --deep: #03060d;
  --teal: #00bcd4;
  --glow: 0 0 30px rgba(0,229,255,0.7);
  --glow2: 0 0 60px rgba(0,229,255,0.4);
}

* { margin:0; padding:0; box-sizing:border-box; }

html, body, #root {
  width:100%; height:100%;
  overflow:hidden;
  background:var(--deep);
  color:#fff;
  font-family:'Rajdhani', sans-serif;
}


/* ── THREE BG CANVAS ── */
#bg-canvas {
  position:fixed;
  inset:0;
  z-index:0;
}

/* ── SCAN LINES ── */
.scanlines {
  position:fixed; inset:0; z-index:1; pointer-events:none;
  background: repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.08) 2px,rgba(0,0,0,0.08) 4px);
}

/* ── VIGNETTE ── */
.vignette {
  position:fixed; inset:0; z-index:2; pointer-events:none;
  background: radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,0.85) 100%);
}

/* ── HUD CORNERS ── */
.hud-corner { position:fixed; width:60px; height:60px; z-index:10; pointer-events:none; }
.hud-corner::before,.hud-corner::after { content:''; position:absolute; background:var(--miku); }
.hud-corner::before { width:2px; height:100%; }
.hud-corner::after  { width:100%; height:2px; }
.hud-corner.tl { top:20px; left:20px; }
.hud-corner.tr { top:20px; right:20px; transform:scaleX(-1); }
.hud-corner.bl { bottom:20px; left:20px; transform:scaleY(-1); }
.hud-corner.br { bottom:20px; right:20px; transform:scale(-1); }

/* ── APP LAYOUT ── */
.app { display:flex; height:100vh; position:relative; z-index:5; }

/* ── SIDEBAR ── */
.sidebar {
  width:280px; display:flex; flex-direction:column; align-items:center;
  padding:30px 20px 30px;
  background: linear-gradient(180deg, rgba(0,229,255,0.04) 0%, transparent 100%);
  border-right:1px solid rgba(0,229,255,0.15);
  backdrop-filter:blur(20px);
  position:relative; overflow:hidden;
}
.sidebar::before {
  content:''; position:absolute; top:0; left:0; right:0; height:2px;
  background: linear-gradient(90deg, transparent, var(--miku), transparent);
  animation: scanH 3s linear infinite;
}
@keyframes scanH {
  0%{ transform:scaleX(0); opacity:0; }
  50%{ transform:scaleX(1); opacity:1; }
  100%{ transform:scaleX(0); opacity:0; }
}

/* ── JARVIS ORB ── */
.jarvis-wrap { position:relative; width:220px; height:220px; margin-bottom:14px; flex-shrink:0; }
#jarvisCanvas {
  width:220px; height:220px; border-radius:50%; display:block;
  filter:drop-shadow(0 0 18px rgba(0,229,255,0.6)) drop-shadow(0 0 40px rgba(0,229,255,0.25));
  transition: filter 0.5s ease;
}
.jarvis-label {
  position:absolute; bottom:-2px; left:50%; transform:translateX(-50%);
  font-family:'Orbitron'; font-size:0.5rem; letter-spacing:4px;
  color:rgba(0,229,255,0.5); white-space:nowrap;
}

/* ── SIDEBAR TEXT ── */
.miku-title {
  font-family:'Orbitron', sans-serif; font-size:1.1rem; font-weight:900;
  letter-spacing:4px; color:var(--miku); text-shadow:var(--glow); margin-bottom:4px;
}
.miku-sub {
  font-family:'Noto Sans JP', sans-serif; font-size:0.7rem;
  color:rgba(0,229,255,0.6); letter-spacing:3px; margin-bottom:20px;
}

/* ── STATUS PILLS ── */
.status-row { display:flex; gap:8px; margin-bottom:20px; }
.status-pill {
  padding:4px 10px; border-radius:20px; font-size:0.65rem;
  font-weight:700; letter-spacing:1px; border:1px solid;
}
.status-pill.online { color:#00e676; border-color:#00e676; background:rgba(0,230,118,0.1); }
.status-pill.v4     { color:var(--miku); border-color:var(--miku); background:rgba(0,229,255,0.08); }

/* ── WAVE BARS ── */
.wave-bar-container { display:flex; gap:3px; align-items:center; height:30px; }
.wave-bar {
  width:3px; border-radius:2px;
  background:linear-gradient(180deg, var(--miku), var(--miku2));
  box-shadow:0 0 6px var(--miku);
  animation:wavePulse 0.8s ease-in-out infinite;
}
@keyframes wavePulse {
  0%,100%{ height:6px; }
  50%{ height:28px; }
}


/* ── STATS ── */
.stats-panel { width:100%; margin-top:auto; display:flex; flex-direction:column; gap:10px; }
.stat-row {
  display:flex; justify-content:space-between; align-items:center;
  font-size:0.7rem; color:rgba(255,255,255,0.5); letter-spacing:1px;
}
.stat-bar { width:100%; height:2px; background:rgba(255,255,255,0.08); border-radius:2px; margin-top:4px; overflow:hidden; }
.stat-fill {
  height:100%;
  background:linear-gradient(90deg, var(--miku), var(--miku2));
  border-radius:2px;
  animation:fillAnim 1.5s ease-out forwards;
}
@keyframes fillAnim { from{ width:0; } }

/* ── CHAT CONTAINER ── */
.chat-container { flex:1; display:flex; flex-direction:column; backdrop-filter:blur(10px); }

/* ── HEADER ── */
.header {
  padding:20px 30px; border-bottom:1px solid rgba(0,229,255,0.12);
  display:flex; align-items:center; justify-content:space-between;
  background:rgba(0,0,0,0.2);
}
.header-title { font-family:'Orbitron'; font-size:0.75rem; letter-spacing:4px; color:var(--miku); text-shadow:var(--glow); }
.header-dots { display:flex; gap:8px; }
.hdot { width:8px; height:8px; border-radius:50%; }
.hdot:nth-child(1){ background:#ff4dd2; box-shadow:0 0 8px #ff4dd2; }
.hdot:nth-child(2){ background:#ffeb3b; box-shadow:0 0 8px #ffeb3b; }
.hdot:nth-child(3){ background:#00e676; box-shadow:0 0 8px #00e676; animation:pulse-dot 1.5s infinite; }
@keyframes pulse-dot { 0%,100%{ opacity:1; } 50%{ opacity:0.3; } }

/* ── CHAT BOX ── */
.chat-box {
  flex:1; padding:30px; overflow-y:auto;
  display:flex; flex-direction:column; gap:20px;
  scrollbar-width:thin; scrollbar-color:rgba(0,229,255,0.3) transparent;
}
.chat-box::-webkit-scrollbar { width:4px; }
.chat-box::-webkit-scrollbar-thumb { background:rgba(0,229,255,0.3); border-radius:2px; }

/* ── WELCOME ── */
.welcome-screen {
  flex:1; display:flex; flex-direction:column; align-items:center;
  justify-content:center; gap:30px; text-align:center;
}
.welcome-miku-text {
  font-family:'Orbitron'; font-size:3rem; font-weight:900; line-height:1;
  background:linear-gradient(135deg, var(--miku) 0%, var(--miku2) 50%, var(--pink) 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  filter:drop-shadow(0 0 20px rgba(0,229,255,0.5));
  animation:textGlitch 8s infinite;
}
@keyframes textGlitch {
  0%,88%,100%{ transform:none; filter:drop-shadow(0 0 20px rgba(0,229,255,0.5)); }
  90%{ transform:skewX(3deg) translateX(3px); filter:drop-shadow(4px 0 0 #ff4dd2) drop-shadow(-4px 0 0 var(--miku)); }
  92%{ transform:skewX(-2deg) translateX(-2px); }
  94%{ transform:none; }
}
.welcome-jp {
  font-family:'Noto Sans JP'; font-size:0.9rem;
  color:rgba(0,229,255,0.5); letter-spacing:8px; margin-top:-20px;
}
.welcome-desc {
  max-width:400px; font-size:1rem; font-weight:300;
  color:rgba(255,255,255,0.5); line-height:1.8; letter-spacing:1px;
}
.quick-btns { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; max-width:500px; }
.quick-btn {
  padding:10px 20px; border-radius:6px;
  border:1px solid rgba(0,229,255,0.25); background:rgba(0,229,255,0.05);
  color:rgba(255,255,255,0.7); font-family:'Rajdhani'; font-size:0.85rem;
  letter-spacing:1px; cursor:pointer; transition:all 0.3s;
}
.quick-btn:hover {
  border-color:var(--miku); color:var(--miku);
  background:rgba(0,229,255,0.1); box-shadow:0 0 20px rgba(0,229,255,0.2);
  transform:translateY(-2px);
}

/* ── MESSAGES ── */
.message {
  max-width:72%; padding:18px 22px; border-radius:16px;
  line-height:1.7; animation:msgIn 0.4s cubic-bezier(0.34,1.56,0.64,1);
  font-size:0.95rem; letter-spacing:0.5px; position:relative;
  white-space:pre-wrap;
}
@keyframes msgIn {
  from{ opacity:0; transform:translateY(20px) scale(0.95); }
  to{   opacity:1; transform:translateY(0) scale(1); }
}
.message.user {
  align-self:flex-end;
  background:linear-gradient(135deg,rgba(0,229,255,0.2), rgba(29,233,182,0.2));
  border:1px solid rgba(0,229,255,0.4); color:#e0fffe;
}
.message.bot {
  align-self: flex-start;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(0, 229, 255, 0.15);
  color: rgba(255, 255, 255, 0.85);
}

/* ── INPUT AREA ── */
.input-area {
  padding:20px 30px; border-top:1px solid rgba(0,229,255,0.12);
  display:flex; gap:12px; align-items:center; background:rgba(0,0,0,0.2);
}
.input-wrap { flex:1; position:relative; }
.input-wrap::before {
  content:''; position:absolute; bottom:0; left:10%; right:10%; height:1px;
  background:linear-gradient(90deg, transparent, var(--miku), transparent);
  opacity:0; transition:opacity 0.3s;
}
.input-wrap:focus-within::before { opacity:1; }

input[type="text"] {
  width:100%; padding:16px 20px; border-radius:10px;
  border:1px solid rgba(0,229,255,0.2); background:rgba(255,255,255,0.03);
  color:#fff; outline:none; font-family:'Rajdhani'; font-size:1rem;
  letter-spacing:1px; transition:all 0.3s;
}
input[type="text"]::placeholder { color:rgba(0,229,255,0.3); }
input[type="text"]:focus {
  border-color:rgba(0,229,255,0.5); background:rgba(0,229,255,0.04);
  box-shadow:0 0 20px rgba(0,229,255,0.1);
}

.send-btn {
  padding:16px 28px; border-radius:10px; border:none;
  background:linear-gradient(135deg, var(--miku), var(--miku2));
  color:#001a1f; font-family:'Orbitron'; font-size:0.6rem;
  font-weight:700; letter-spacing:2px; cursor:pointer; transition:all 0.3s;
  position:relative; overflow:hidden;
}
.send-btn::after {
  content:''; position:absolute; inset:0;
  background:linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.3));
  transform:translateX(-100%); transition:transform 0.4s;
}
.send-btn:hover { transform:translateY(-2px); box-shadow:0 0 30px rgba(0,229,255,0.5); }
.send-btn:hover::after { transform:translateX(100%); }
.send-btn:disabled { opacity:0.5; cursor:not-allowed; transform:none; }

/* ── FLOATING NOTES ── */
.note {
  position:fixed; pointer-events:none; z-index:3;
  animation:floatNote linear forwards;
  color:var(--miku); text-shadow:0 0 10px var(--miku); opacity:0;
}
@keyframes floatNote {
  0%{ opacity:0; transform:translateY(0) rotate(0deg); }
  10%{ opacity:0.8; }
  90%{ opacity:0.4; }
  100%{ opacity:0; transform:translateY(-200px) rotate(180deg) scale(0); }
}

/* ── INTRO OVERLAY ── */
.intro-overlay {
  position:fixed; inset:0; z-index:100;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  background:#000; gap:20px; transition:opacity 0.8s ease;
}
.intro-logo {
  font-family:'Orbitron'; font-size:2.5rem; font-weight:900;
  color:var(--miku); text-shadow:var(--glow); letter-spacing:8px;
  animation:introLogo 0.5s ease forwards;
}
@keyframes introLogo {
  from{ opacity:0; transform:scale(0.8); }
  to{   opacity:1; transform:scale(1); }
}
.intro-jp {
  font-family:'Noto Sans JP'; font-size:0.8rem;
  color:rgba(0,229,255,0.5); letter-spacing:6px;
  animation:fadeSlide 0.6s 0.3s ease both;
}
@keyframes fadeSlide {
  from{ opacity:0; transform:translateY(10px); }
  to{   opacity:1; transform:translateY(0); }
}
.intro-bar { width:300px; height:2px; background:rgba(255,255,255,0.1); border-radius:2px; overflow:hidden; margin-top:10px; }
.intro-bar-fill {
  height:100%; background:linear-gradient(90deg, var(--miku), var(--miku2));
  width:0%; animation:introFill 1.8s 0.5s ease forwards;
}
.intro-boot-line {
  font-family: 'Orbitron';
  font-size: 0.55rem;
  letter-spacing: 3px;
  color: rgba(0, 229, 255, 0.5);
  height: 1.2em;
  animation: fadeSlide 0.4s ease both;
}


/* ═══════════════════════════════════════════════════════
   TTS — TEXT-TO-SPEECH CONTROLS
═══════════════════════════════════════════════════════ */

/* Top bar below the header */
.tts-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 30px;
  background: rgba(0, 0, 0, 0.25);
  border-bottom: 1px solid rgba(0, 229, 255, 0.08);
}

.tts-status {
  display: flex;
  align-items: center;
  gap: 7px;
  flex: 1;
}

.tts-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(0, 229, 255, 0.4);
  transition: all 0.3s;
}

.tts-speaking .tts-dot {
  background: var(--pink);
  box-shadow: 0 0 8px var(--pink), 0 0 16px rgba(255, 77, 210, 0.5);
  animation: ttsBlip 0.6s ease-in-out infinite;
}

@keyframes ttsBlip {
  0%, 100% { transform: scale(1); opacity: 1; }
  50%       { transform: scale(1.6); opacity: 0.7; }
}

.tts-label {
  font-family: 'Orbitron';
  font-size: 0.55rem;
  letter-spacing: 2px;
  color: rgba(0, 229, 255, 0.45);
  transition: color 0.3s;
}

.tts-speaking .tts-label {
  color: var(--pink);
  text-shadow: 0 0 10px rgba(255, 77, 210, 0.6);
}

.tts-stop-btn {
  padding: 5px 14px;
  border-radius: 4px;
  border: 1px solid rgba(255, 77, 210, 0.5);
  background: rgba(255, 77, 210, 0.08);
  color: var(--pink);
  font-family: 'Orbitron';
  font-size: 0.5rem;
  letter-spacing: 2px;
  cursor: pointer;
  transition: all 0.25s;
}
.tts-stop-btn:hover {
  background: rgba(255, 77, 210, 0.18);
  box-shadow: 0 0 14px rgba(255, 77, 210, 0.4);
}

.tts-toggle-btn {
  padding: 5px 14px;
  border-radius: 4px;
  border: 1px solid rgba(0, 229, 255, 0.3);
  background: rgba(0, 229, 255, 0.05);
  color: rgba(0, 229, 255, 0.6);
  font-family: 'Orbitron';
  font-size: 0.5rem;
  letter-spacing: 2px;
  cursor: pointer;
  transition: all 0.25s;
}
.tts-toggle-btn:hover {
  background: rgba(0, 229, 255, 0.12);
  color: var(--miku);
}
.tts-toggle-btn.tts-off {
  border-color: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.25);
}


/* ═══════════════════════════════════════════════════════
   SPEECH WAVEFORM VISUALIZER
═══════════════════════════════════════════════════════ */

.speech-waveform {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 3px;
  height: 32px;
  padding: 0 30px;
  background: rgba(0, 0, 0, 0.15);
  border-bottom: 1px solid rgba(0, 229, 255, 0.06);
  overflow: hidden;
}

.waveform-bar {
  width: 2px;
  height: 3px;
  border-radius: 1px;
  background: linear-gradient(180deg, var(--miku) 0%, var(--miku2) 100%);
  opacity: 0.25;
  transition: opacity 0.4s, box-shadow 0.4s;
  flex-shrink: 0;
}

/* Idle — subtle heartbeat with nth-child stagger */
.speech-waveform:not(.waveform-active) .waveform-bar {
  animation: wfIdle 2.8s ease-in-out infinite;
}
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(1)  { animation-delay: 0.00s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(2)  { animation-delay: 0.10s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(3)  { animation-delay: 0.20s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(4)  { animation-delay: 0.30s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(5)  { animation-delay: 0.40s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(6)  { animation-delay: 0.50s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(7)  { animation-delay: 0.60s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(8)  { animation-delay: 0.70s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(9)  { animation-delay: 0.80s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(10) { animation-delay: 0.70s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(11) { animation-delay: 0.60s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(12) { animation-delay: 0.50s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(13) { animation-delay: 0.40s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(14) { animation-delay: 0.30s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(15) { animation-delay: 0.20s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(16) { animation-delay: 0.10s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(17) { animation-delay: 0.00s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(18) { animation-delay: 0.10s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(19) { animation-delay: 0.20s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(20) { animation-delay: 0.30s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(21) { animation-delay: 0.40s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(22) { animation-delay: 0.50s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(23) { animation-delay: 0.60s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(24) { animation-delay: 0.70s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(25) { animation-delay: 0.80s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(26) { animation-delay: 0.70s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(27) { animation-delay: 0.60s; }
.speech-waveform:not(.waveform-active) .waveform-bar:nth-child(28) { animation-delay: 0.50s; }
@keyframes wfIdle {
  0%, 100% { height: 3px;  opacity: 0.18; }
  50%       { height: 8px;  opacity: 0.35; }
}

/* Active — aggressive reactive bars */
.waveform-active .waveform-bar {
  opacity: 0.9;
  box-shadow: 0 0 6px var(--miku);
  animation: wfSpeak 0.55s ease-in-out infinite alternate;
}

/* Stagger bar heights so it looks like a real audio spectrum */
.waveform-active .waveform-bar:nth-child(1)  { animation-duration: 0.38s; }
.waveform-active .waveform-bar:nth-child(2)  { animation-duration: 0.52s; }
.waveform-active .waveform-bar:nth-child(3)  { animation-duration: 0.44s; }
.waveform-active .waveform-bar:nth-child(4)  { animation-duration: 0.35s; }
.waveform-active .waveform-bar:nth-child(5)  { animation-duration: 0.61s; }
.waveform-active .waveform-bar:nth-child(6)  { animation-duration: 0.40s; }
.waveform-active .waveform-bar:nth-child(7)  { animation-duration: 0.28s; }
.waveform-active .waveform-bar:nth-child(8)  { animation-duration: 0.55s; }
.waveform-active .waveform-bar:nth-child(9)  { animation-duration: 0.33s; }
.waveform-active .waveform-bar:nth-child(10) { animation-duration: 0.47s; }
.waveform-active .waveform-bar:nth-child(11) { animation-duration: 0.62s; }
.waveform-active .waveform-bar:nth-child(12) { animation-duration: 0.38s; }
.waveform-active .waveform-bar:nth-child(13) { animation-duration: 0.51s; }
.waveform-active .waveform-bar:nth-child(14) { animation-duration: 0.29s; background: linear-gradient(180deg, var(--pink) 0%, var(--miku) 100%); box-shadow: 0 0 6px var(--pink); }
.waveform-active .waveform-bar:nth-child(15) { animation-duration: 0.44s; }
.waveform-active .waveform-bar:nth-child(16) { animation-duration: 0.57s; }
.waveform-active .waveform-bar:nth-child(17) { animation-duration: 0.36s; }
.waveform-active .waveform-bar:nth-child(18) { animation-duration: 0.49s; background: linear-gradient(180deg, var(--pink) 0%, var(--miku) 100%); box-shadow: 0 0 6px var(--pink); }
.waveform-active .waveform-bar:nth-child(19) { animation-duration: 0.42s; }
.waveform-active .waveform-bar:nth-child(20) { animation-duration: 0.31s; }
.waveform-active .waveform-bar:nth-child(21) { animation-duration: 0.58s; }
.waveform-active .waveform-bar:nth-child(22) { animation-duration: 0.37s; }
.waveform-active .waveform-bar:nth-child(23) { animation-duration: 0.53s; }
.waveform-active .waveform-bar:nth-child(24) { animation-duration: 0.26s; }
.waveform-active .waveform-bar:nth-child(25) { animation-duration: 0.46s; }
.waveform-active .waveform-bar:nth-child(26) { animation-duration: 0.64s; }
.waveform-active .waveform-bar:nth-child(27) { animation-duration: 0.39s; }
.waveform-active .waveform-bar:nth-child(28) { animation-duration: 0.50s; }

@keyframes wfSpeak {
  from { height: 4px;  opacity: 0.6; }
  to   { height: 26px; opacity: 1.0; }
}


/* ═══════════════════════════════════════════════════════
   MESSAGE TEXT + REPLAY BUTTON
═══════════════════════════════════════════════════════ */

/* msg-text: block so replay button sits cleanly on its own line */
.msg-text {
  display: block;
}

/* Mode-aware bot message label */
.message.bot::before {
  content: 'MIKU ▸';
  display: block;
  font-size: 0.6rem;
  font-family: 'Orbitron';
  letter-spacing: 2px;
  color: var(--miku);
  margin-bottom: 8px;
}
body.mode-eva .message.bot::before {
  content: 'EVA ▸';
}

/* Processing indicator — three bouncing dots */
.processing-indicator {
  display: flex;
  gap: 5px;
  align-items: center;
  height: 1.2em;
}
.proc-dot {
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: var(--miku);
  animation: procBounce 1.1s ease-in-out infinite;
}
.proc-dot:nth-child(1) { animation-delay: 0s; }
.proc-dot:nth-child(2) { animation-delay: 0.18s; }
.proc-dot:nth-child(3) { animation-delay: 0.36s; }
@keyframes procBounce {
  0%, 80%, 100% { transform: scale(0.7); opacity: 0.4; }
  40%           { transform: scale(1.2); opacity: 1; box-shadow: 0 0 8px var(--miku); }
}

/* Welcome screen shortcut badges */
.welcome-shortcuts {
  font-family: 'Rajdhani';
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.28);
  letter-spacing: 1px;
  margin-top: -10px;
}
.shortcut-badge {
  display: inline-block;
  padding: 2px 7px;
  border: 1px solid rgba(0, 229, 255, 0.25);
  border-radius: 4px;
  font-family: 'Orbitron';
  font-size: 0.5rem;
  color: rgba(0, 229, 255, 0.5);
  letter-spacing: 1px;
  vertical-align: middle;
}

.replay-btn {
  display: block;
  margin-top: 10px;
  padding: 4px 12px;
  border-radius: 4px;
  border: 1px solid rgba(0, 229, 255, 0.2);
  background: transparent;
  color: rgba(0, 229, 255, 0.5);
  font-family: 'Orbitron';
  font-size: 0.45rem;
  letter-spacing: 2px;
  cursor: pointer;
  transition: all 0.25s;
}
.replay-btn:hover {
  border-color: var(--miku);
  color: var(--miku);
  background: rgba(0, 229, 255, 0.07);
  box-shadow: 0 0 10px rgba(0, 229, 255, 0.2);
}


/* ═══════════════════════════════════════════════════════
   JARVIS ORB — SPEAKING STATE
═══════════════════════════════════════════════════════ */

/* Miku mode speaking — label goes pink */
body.mode-miku .jarvis-label-speaking {
  color: var(--pink) !important;
  text-shadow: 0 0 10px rgba(255, 77, 210, 0.8);
  letter-spacing: 3px !important;
}

/* Standard mode speaking — label stays cyan, just brighter */
body.mode-eva .jarvis-label-speaking {
  color: var(--miku) !important;
  text-shadow: 0 0 12px rgba(0, 229, 255, 0.9);
  letter-spacing: 3px !important;
}

/* Miku mode: orb glows pink when speaking */
body.mode-miku .sidebar-speaking #jarvisCanvas {
  filter:
    drop-shadow(0 0 22px rgba(255, 77, 210, 0.7))
    drop-shadow(0 0 50px rgba(255, 77, 210, 0.3));
}

/* Standard mode: orb glows bright cyan when speaking */
body.mode-eva .sidebar-speaking #jarvisCanvas {
  filter:
    drop-shadow(0 0 22px rgba(0, 229, 255, 0.8))
    drop-shadow(0 0 50px rgba(0, 200, 255, 0.35));
}

/* Speaking status pill */
.pill-speaking {
  color: var(--pink) !important;
  border-color: var(--pink) !important;
  background: rgba(255, 77, 210, 0.1) !important;
  box-shadow: 0 0 10px rgba(255, 77, 210, 0.3);
  animation: pillPulse 1s ease-in-out infinite;
}

@keyframes pillPulse {
  0%, 100% { box-shadow: 0 0 10px rgba(255, 77, 210, 0.3); }
  50%       { box-shadow: 0 0 20px rgba(255, 77, 210, 0.7); }
}

/* Standard mode: pill pulses cyan when speaking */
body.mode-eva .pill-speaking {
  color: var(--miku) !important;
  border-color: var(--miku) !important;
  background: rgba(0, 229, 255, 0.1) !important;
  animation: pillPulseStd 1.4s ease-in-out infinite;
}
@keyframes pillPulseStd {
  0%, 100% { box-shadow: 0 0 8px rgba(0, 229, 255, 0.3); }
  50%       { box-shadow: 0 0 18px rgba(0, 229, 255, 0.7); }
}

/* ═══════════════════════════════════════════════════════
   AMBIENT OVERLAY — mode-aware speaking theme
   Standard mode → stays cyan/mint family
   Miku mode     → dramatic pink/magenta takeover
═══════════════════════════════════════════════════════ */

.ambient-overlay {
  position: fixed;
  inset: 0;
  z-index: 4;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.32s cubic-bezier(0.4, 0, 0.2, 1);
}
.ambient-active {
  animation: ambientFlash 0.5s ease-out forwards;
}
@keyframes ambientFlash {
  0%   { opacity: 0; }
  15%  { opacity: 1.6; }
  100% { opacity: 1; }
}

/* ── STANDARD MODE speaking: cool cyan/mint bloom — calm, no shift ── */
body.mode-eva .ambient-overlay {
  background:
    radial-gradient(ellipse 55% 80% at 8%  50%, rgba(0, 229, 255, 0.12) 0%, transparent 65%),
    radial-gradient(ellipse 45% 70% at 92% 50%, rgba(29, 233, 182, 0.08) 0%, transparent 65%),
    radial-gradient(ellipse 80% 40% at 50% 100%, rgba(0, 200, 255, 0.06) 0%, transparent 60%);
}

/* Standard: HUD corners stay cyan, just pulse brighter */
body.mode-eva .speaking-active .hud-corner::before,
body.mode-eva .speaking-active .hud-corner::after {
  animation: hudPulseStd 1.4s ease-in-out infinite;
}
@keyframes hudPulseStd {
  0%, 100% { background: var(--miku); box-shadow: 0 0 6px var(--miku); }
  50%       { background: var(--miku2); box-shadow: 0 0 14px var(--miku); }
}

/* Standard: sidebar glow stays cyan */
body.mode-eva .speaking-active .sidebar {
  border-right-color: rgba(0, 229, 255, 0.45);
  box-shadow: 4px 0 30px rgba(0, 229, 255, 0.10);
  transition: all 0.3s ease;
}

/* Standard: header stays cyan, just brightens */
body.mode-eva .speaking-active .header-title {
  color: var(--miku);
  text-shadow: 0 0 24px rgba(0, 229, 255, 0.8), 0 0 60px rgba(0, 229, 255, 0.25);
  transition: color 0.3s ease, text-shadow 0.3s ease;
}

/* Standard: chat bloom stays cyan */
body.mode-eva .speaking-active .chat-container {
  box-shadow: 0 -2px 40px rgba(0, 229, 255, 0.07) inset;
  transition: box-shadow 0.3s ease;
}

/* Standard: waveform stays cyan/mint */
body.mode-eva .speaking-active .waveform-active .waveform-bar {
  background: linear-gradient(180deg, var(--miku) 0%, var(--miku2) 100%);
  box-shadow: 0 0 6px var(--miku);
}

/* Standard: scanlines stay neutral */
body.mode-eva .speaking-active .scanlines {
  background: repeating-linear-gradient(
    0deg,
    transparent, transparent 2px,
    rgba(0, 229, 255, 0.025) 2px,
    rgba(0, 229, 255, 0.025) 4px
  );
}

/* Standard: bot messages get cyan glow */
body.mode-eva .speaking-active .message.bot {
  border-color: rgba(0, 229, 255, 0.22);
  box-shadow: -3px 0 20px rgba(0, 229, 255, 0.10);
  transition: all 0.3s ease;
}


/* ── MIKU MODE speaking: full pink/magenta dramatic shift ── */
body.mode-miku .ambient-overlay {
  background:
    radial-gradient(ellipse 55% 80% at 8%  50%, rgba(255, 77, 210, 0.18) 0%, transparent 65%),
    radial-gradient(ellipse 45% 70% at 92% 50%, rgba(0, 229, 255, 0.12)  0%, transparent 65%),
    radial-gradient(ellipse 80% 40% at 50% 100%, rgba(255, 77, 210, 0.08) 0%, transparent 60%);
}

/* Miku: HUD corners cycle cyan → hot pink */
body.mode-miku .speaking-active .hud-corner::before,
body.mode-miku .speaking-active .hud-corner::after {
  animation: hudColorPulseMiku 1.1s ease-in-out infinite;
}
@keyframes hudColorPulseMiku {
  0%, 100% { background: var(--miku);  box-shadow: 0 0 8px var(--miku); }
  50%       { background: var(--pink); box-shadow: 0 0 18px var(--pink); }
}

/* Miku: sidebar glows pink */
body.mode-miku .speaking-active .sidebar {
  border-right-color: rgba(255, 77, 210, 0.45);
  box-shadow: 4px 0 30px rgba(255, 77, 210, 0.12);
  transition: all 0.3s ease;
}

/* Miku: header flips to pink */
body.mode-miku .speaking-active .header-title {
  color: var(--pink);
  text-shadow: 0 0 24px rgba(255, 77, 210, 0.7), 0 0 60px rgba(255, 77, 210, 0.2);
  transition: color 0.3s ease, text-shadow 0.3s ease;
}

/* Miku: chat bloom pink */
body.mode-miku .speaking-active .chat-container {
  box-shadow: 0 -2px 40px rgba(255, 77, 210, 0.08) inset;
  transition: box-shadow 0.3s ease;
}

/* Miku: waveform bars shift to pink */
body.mode-miku .speaking-active .waveform-active .waveform-bar {
  background: linear-gradient(180deg, var(--pink) 0%, var(--miku) 100%);
  box-shadow: 0 0 6px var(--pink);
}

/* Miku: scanlines tint pink */
body.mode-miku .speaking-active .scanlines {
  background: repeating-linear-gradient(
    0deg,
    transparent, transparent 2px,
    rgba(255, 77, 210, 0.035) 2px,
    rgba(255, 77, 210, 0.035) 4px
  );
  transition: background 0.3s ease;
}

/* Miku: bot messages glow pink */
body.mode-miku .speaking-active .message.bot {
  border-color: rgba(255, 77, 210, 0.25);
  box-shadow: -3px 0 20px rgba(255, 77, 210, 0.12);
  transition: all 0.3s ease;
}


/* ═══════════════════════════════════════════════════════
   MIKU MODE BUTTON
═══════════════════════════════════════════════════════ */

.miku-mode-btn {
  width: 100%;
  padding: 11px 16px;
  border-radius: 8px;
  border: 1px solid;
  font-family: 'Orbitron';
  font-size: 0.6rem;
  font-weight: 700;
  letter-spacing: 2px;
  cursor: pointer;
  transition: all 0.35s ease;
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  position: relative;
  overflow: hidden;
}

.miku-mode-btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent 40%, rgba(255, 255, 255, 0.08));
  transform: translateX(-100%);
  transition: transform 0.4s;
}
.miku-mode-btn:hover::after { transform: translateX(100%); }

.miku-mode-on {
  color: var(--miku);
  border-color: rgba(0, 229, 255, 0.5);
  background: rgba(0, 229, 255, 0.07);
  box-shadow: 0 0 20px rgba(0, 229, 255, 0.15), inset 0 0 20px rgba(0, 229, 255, 0.04);
}
.miku-mode-on:hover {
  background: rgba(0, 229, 255, 0.14);
  box-shadow: 0 0 30px rgba(0, 229, 255, 0.3);
}

.miku-mode-off {
  color: rgba(255, 255, 255, 0.4);
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.03);
}
.miku-mode-off:hover {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.6);
}

.miku-mode-indicator {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
  transition: all 0.35s;
}
.miku-mode-on  .miku-mode-indicator {
  background: var(--miku);
  box-shadow: 0 0 8px var(--miku);
  animation: modeDot 1.8s ease-in-out infinite;
}
.miku-mode-off .miku-mode-indicator {
  background: rgba(255, 255, 255, 0.2);
}
@keyframes modeDot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50%       { opacity: 0.5; transform: scale(0.7); }
}

.miku-mode-hint {
  font-family: 'Noto Sans JP';
  font-size: 0.6rem;
  color: rgba(255, 255, 255, 0.28);
  letter-spacing: 1px;
  margin-top: 5px;
  margin-bottom: 4px;
  text-align: center;
}

.miku-shortcut-hint {
  font-family: 'Rajdhani';
  font-size: 0.62rem;
  color: rgba(255, 255, 255, 0.14);
  letter-spacing: 1.5px;
  margin-bottom: 16px;
  text-align: center;
  text-transform: uppercase;
}


/* ═══════════════════════════════════════════════════════
   MIC BUTTON (beside send)
═══════════════════════════════════════════════════════ */

.mic-btn {
  flex-shrink: 0;
  width: 48px;
  height: 48px;
  border-radius: 10px;
  border: 1px solid rgba(0, 229, 255, 0.25);
  background: rgba(0, 229, 255, 0.05);
  color: rgba(0, 229, 255, 0.6);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s;
  padding: 0;
}
.mic-btn:hover {
  border-color: var(--miku);
  color: var(--miku);
  background: rgba(0, 229, 255, 0.1);
  box-shadow: 0 0 16px rgba(0, 229, 255, 0.2);
}
.mic-btn:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}


/* ═══════════════════════════════════════════════════════
   VOICE SHEET — ElevenLabs-style minimal overlay
═══════════════════════════════════════════════════════ */

.vs-overlay {
  position: fixed;
  inset: 0;
  z-index: 200;
  background: rgba(2, 4, 10, 0.88);
  backdrop-filter: blur(32px) saturate(0.8);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 60px;
  animation: vsIn 0.28s ease;
}
@keyframes vsIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.vs-panel {
  width: 420px;
  max-width: 92vw;
  max-height: 92vh;
  overflow-y: auto;
  background: rgba(5, 10, 20, 0.96);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 20px;
  padding: 22px 28px 26px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
  box-shadow:
    0 0 0 1px rgba(0, 229, 255, 0.04),
    0 30px 70px rgba(0, 0, 0, 0.8),
    0 0 80px rgba(0, 229, 255, 0.03);
  animation: vsPanelIn 0.32s cubic-bezier(0.34, 1.4, 0.64, 1);
  scrollbar-width: none;
}
.vs-panel::-webkit-scrollbar { display: none; }
@keyframes vsPanelIn {
  from { opacity: 0; transform: translateY(28px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0)    scale(1); }
}

/* Top bar */
.vs-topbar {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
}
.vs-mode-chip {
  font-family: 'Orbitron';
  font-size: 0.5rem;
  letter-spacing: 2px;
  color: rgba(0, 229, 255, 0.35);
  padding: 4px 10px;
  border: 1px solid rgba(0, 229, 255, 0.12);
  border-radius: 20px;
}
.vs-x {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: none;
  color: rgba(255, 255, 255, 0.3);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}
.vs-x:hover {
  border-color: rgba(255, 255, 255, 0.3);
  color: rgba(255, 255, 255, 0.7);
}

/* Canvas wrapper — the visual centerpiece */
.vs-canvas-wrap {
  position: relative;
  width: 100%;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 16px;
  border-radius: 12px;
  transition: background 0.3s ease;
}
.vs-canvas-wrap:hover {
  background: rgba(255, 255, 255, 0.02);
}
/* Active listening state — subtle border glow */
.vs-canvas-listening {
  background: rgba(0, 229, 255, 0.02);
  border: 1px solid rgba(0, 229, 255, 0.08);
}
.vs-canvas {
  width: 100%;
  height: 80px;
  display: block;
}

/* Pulse ring behind waveform — only during listening */
.vs-pulse-ring {
  position: absolute;
  inset: -6px;
  border-radius: 16px;
  border: 1px solid rgba(255, 77, 210, 0);
  pointer-events: none;
  transition: border-color 0.4s;
}
.vs-pulse-ring-active {
  border-color: rgba(255, 77, 210, 0.2);
  animation: vsPulseRing 1.8s ease-in-out infinite;
}
@keyframes vsPulseRing {
  0%, 100% { box-shadow: 0 0 0px rgba(255, 77, 210, 0);   border-color: rgba(255, 77, 210, 0.15); }
  50%       { box-shadow: 0 0 20px rgba(255, 77, 210, 0.2); border-color: rgba(255, 77, 210, 0.35); }
}

/* Status text */
.vs-status {
  font-family: 'Rajdhani';
  font-size: 0.8rem;
  letter-spacing: 2px;
  color: rgba(255, 255, 255, 0.28);
  margin-bottom: 14px;
  text-transform: uppercase;
}

/* Transcript */
.vs-text {
  width: 100%;
  font-family: 'Rajdhani';
  font-size: 1.05rem;
  line-height: 1.55;
  color: rgba(255, 255, 255, 0.85);
  text-align: center;
  letter-spacing: 0.5px;
  margin-bottom: 18px;
  padding: 0 8px;
}

/* Error */
.vs-err {
  font-size: 0.75rem;
  color: rgba(255, 120, 120, 0.75);
  text-align: center;
  margin-bottom: 12px;
}

/* Send button */
.vs-send {
  padding: 11px 36px;
  border-radius: 8px;
  border: none;
  background: linear-gradient(135deg, var(--miku), var(--miku2));
  color: #001a1f;
  font-family: 'Orbitron';
  font-size: 0.55rem;
  font-weight: 700;
  letter-spacing: 3px;
  cursor: pointer;
  transition: all 0.25s;
  text-transform: uppercase;
}
.vs-send:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 28px rgba(0, 229, 255, 0.4);
}


/* ═══════════════════════════════════════════════════════
   VOICE SHEET — ORB + HINT (new elements from v5)
═══════════════════════════════════════════════════════ */

.vs-orb-wrap {
  width: 160px;
  height: 160px;
  flex-shrink: 0;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 8px;
  transition: filter 0.4s ease, opacity 0.4s ease;
  opacity: 0.5;
}
.vs-orb-wrap.vs-orb-active {
  opacity: 1;
  filter: drop-shadow(0 0 24px rgba(255, 77, 210, 0.4));
}
.vs-orb-canvas {
  border-radius: 50%;
  display: block;
}

.vs-hint {
  font-family: 'Rajdhani';
  font-size: 0.72rem;
  color: rgba(255, 255, 255, 0.2);
  letter-spacing: 1px;
  text-align: center;
  margin-top: 10px;
}


/* ═══════════════════════════════════════════════════════
   MODE FLASH OVERLAY
═══════════════════════════════════════════════════════ */

.mode-flash-overlay {
  position: fixed;
  inset: 0;
  z-index: 50;
  pointer-events: none;
  opacity: 0;
}
.mode-flash-active {
  animation: modeFlash 0.55s ease-out forwards;
}

/* Background is set by BODY class, not animation class — correct color per mode */
body.mode-miku .mode-flash-overlay {
  background: radial-gradient(ellipse 70% 70% at 50% 50%,
    rgba(255, 77, 210, 0.28) 0%, transparent 70%);
}
body.mode-eva .mode-flash-overlay {
  background: radial-gradient(ellipse 70% 70% at 50% 50%,
    rgba(0, 200, 255, 0.22) 0%, transparent 70%);
}

@keyframes modeFlash {
  0%   { opacity: 0; }
  10%  { opacity: 1; }
  100% { opacity: 0; }
}


/* ═══════════════════════════════════════════════════════
   BODY MODE CLASSES — calm vs energetic theme
═══════════════════════════════════════════════════════ */

/* Standard mode: cool, calm, muted cyan — lower saturation */
body.mode-eva {
  --miku:  rgba(0, 190, 220, 1);
  --miku2: rgba(0, 150, 200, 1);
  --pink:  rgba(80, 160, 255, 1);
  filter: saturate(0.82) hue-rotate(-6deg);
}

/* Miku mode: full vivid cyan + pink (default values) */
body.mode-miku {
  --miku:  rgba(0, 229, 255, 1);
  --miku2: rgba(29, 233, 182, 1);
  --pink:  rgba(255, 77, 210, 1);
  filter: saturate(1) hue-rotate(0deg);
}

/* Both transitions are smooth */
body {
  transition: filter 0.6s ease;
}


/* ═══════════════════════════════════════════════════════
   MODE TOAST — slides in from top-right
═══════════════════════════════════════════════════════ */

.mode-toast {
  position: fixed;
  top: 24px;
  right: 24px;
  z-index: 300;
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 20px;
  border-radius: 12px;
  backdrop-filter: blur(20px);
  border: 1px solid;
  animation: toastSlide 2.0s cubic-bezier(0.34, 1.4, 0.64, 1) forwards;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}
.mode-toast-miku {
  background: rgba(255, 77, 210, 0.10);
  border-color: rgba(255, 77, 210, 0.35);
  box-shadow: 0 0 40px rgba(255, 77, 210, 0.18), 0 8px 32px rgba(0, 0, 0, 0.5);
}
.mode-toast-eva {
  background: rgba(0, 229, 255, 0.08);
  border-color: rgba(0, 229, 255, 0.35);
  box-shadow: 0 0 40px rgba(0, 229, 255, 0.15), 0 8px 32px rgba(0, 0, 0, 0.5);
}

@keyframes toastSlide {
  0%   { opacity: 0; transform: translateX(60px) scale(0.9); }
  15%  { opacity: 1; transform: translateX(0) scale(1); }
  75%  { opacity: 1; transform: translateX(0) scale(1); }
  100% { opacity: 0; transform: translateX(20px) scale(0.95); }
}

.mode-toast-icon {
  font-size: 1.4rem;
  line-height: 1;
}
.mode-toast-miku .mode-toast-icon { color: var(--pink); text-shadow: 0 0 12px var(--pink); }
.mode-toast-eva  .mode-toast-icon { color: var(--miku); text-shadow: 0 0 12px var(--miku); }

.mode-toast-title {
  font-family: 'Orbitron';
  font-size: 0.62rem;
  font-weight: 700;
  letter-spacing: 3px;
}
.mode-toast-miku .mode-toast-title { color: var(--pink); }
.mode-toast-eva  .mode-toast-title { color: var(--miku); }

.mode-toast-sub {
  font-family: 'Rajdhani';
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.45);
  letter-spacing: 0.5px;
  margin-top: 2px;
}


/* ═══════════════════════════════════════════════════════
   DUAL PERSONA — ISOLATED CHAT PANELS
   Each persona's chat slides in from its own direction.
   Miku comes from the left, Eva from the right.
   On switch the outgoing panel fades out and the
   incoming panel slides in — a clean persona transition.
═══════════════════════════════════════════════════════ */

/* Base chat-box already defined — just add the persona animations */
.chat-box-miku {
  animation: slideInLeft 0.32s cubic-bezier(0.34, 1.2, 0.64, 1);
}
.chat-box-eva {
  animation: slideInRight 0.32s cubic-bezier(0.34, 1.2, 0.64, 1);
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-18px); }
  to   { opacity: 1; transform: translateX(0);     }
}
@keyframes slideInRight {
  from { opacity: 0; transform: translateX(18px);  }
  to   { opacity: 1; transform: translateX(0);     }
}

/* Eva mode: message label override — already set via body.mode-eva .message.bot::before
   Ensure the ::before content is explicitly 'EVA ▸' in CSS for precision */
body.mode-eva .message.bot::before {
  content: 'EVA ▸';
  color: var(--miku);
}

/* Eva mode: message bubble gets a slightly cooler border tint */
body.mode-eva .message.bot {
  border-color: rgba(0, 229, 255, 0.18);
}
body.mode-eva .message.user {
  background: linear-gradient(135deg, rgba(0, 229, 255, 0.15), rgba(0, 200, 220, 0.15));
  border-color: rgba(0, 229, 255, 0.35);
}

/* Miku mode: message label */
body.mode-miku .message.bot::before {
  content: 'MIKU ▸';
  color: var(--pink);
}
body.mode-miku .message.user {
  background: linear-gradient(135deg, rgba(0, 229, 255, 0.2), rgba(29, 233, 182, 0.2));
  border-color: rgba(0, 229, 255, 0.4);
}

/* Persona indicator badge in chat messages */
.msg-persona-badge {
  display: inline-block;
  font-family: 'Orbitron';
  font-size: 0.45rem;
  letter-spacing: 2px;
  padding: 2px 6px;
  border-radius: 3px;
  margin-bottom: 6px;
  opacity: 0.6;
}

/* Eva header: slightly different title treatment */
body.mode-eva .header-title {
  letter-spacing: 3px;
}

/* Quick stat: show which persona is active in the conversation counter */
.persona-switch-divider {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 8px 0;
  opacity: 0.3;
}
.persona-switch-divider::before,
.persona-switch-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--miku);
}
.persona-switch-divider span {
  font-family: 'Orbitron';
  font-size: 0.45rem;
  letter-spacing: 2px;
  color: var(--miku);
  white-space: nowrap;
}
